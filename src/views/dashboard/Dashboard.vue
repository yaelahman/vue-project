<template>
  <div>
    <div class="app-content">
      <div class="content-wrapper">
        <div class="container">
          <div class="row">
            <div class="col">
              <div class="page-description">
                <h1>Dashboard</h1>
              </div>
            </div>
          </div>
          <!-- IF SUPERADMIN -->
          <div class="row" v-if="$can('superadmin')">
            <div class="col-xl-6">
              <div class="card widget widget-stats">
                <div class="card-body">
                  <div class="widget-stats-container d-flex">
                    <div class="widget-stats-icon widget-stats-icon-primary">
                      <i class="material-icons-outlined">how_to_reg</i>
                    </div>
                    <div class="widget-stats-content flex-fill">
                      <span class="widget-stats-title">Company Terdaftar</span>
                      <span class="widget-stats-amount">{{
                      dataSuperadmin.companyTerdaftar
                      }}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-6">
              <div class="card widget widget-stats">
                <div class="card-body">
                  <div class="widget-stats-container d-flex">
                    <div class="widget-stats-icon widget-stats-icon-danger">
                      <i class="material-icons-outlined">person</i>
                    </div>
                    <div class="widget-stats-content flex-fill">
                      <span class="widget-stats-title">Personel Aktif</span>
                      <span class="widget-stats-amount">{{ dataSuperadmin.personelAktif }}
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- IF ADMIN -->
          <div class="row" v-if="$can('admin')">
            <div class="col-xl-6">
              <div class="card widget widget-stats">
                <div class="card-body">
                  <div class="widget-stats-container d-flex">
                    <div class="widget-stats-icon widget-stats-icon-primary">
                      <div>
                        <svg width="24" height="55" viewBox="0 0 36 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path
                            d="M20.2925 15.3882C21.2341 14.5732 21.9894 13.5651 22.507 12.4324C23.0246 11.2997 23.2925 10.0689 23.2925 8.82353C23.2925 6.48338 22.3629 4.23908 20.7082 2.58435C19.0534 0.929619 16.8091 0 14.469 0C12.1289 0 9.88455 0.929619 8.22982 2.58435C6.57509 4.23908 5.64547 6.48338 5.64547 8.82353C5.64545 10.0689 5.91335 11.2997 6.43098 12.4324C6.94861 13.5651 7.70386 14.5732 8.64547 15.3882C6.17512 16.5069 4.07923 18.3133 2.60837 20.5915C1.13752 22.8698 0.353946 25.5235 0.351349 28.2353C0.351349 28.7033 0.537273 29.1522 0.868219 29.4831C1.19917 29.8141 1.64803 30 2.11605 30C2.58408 30 3.03294 29.8141 3.36389 29.4831C3.69484 29.1522 3.88076 28.7033 3.88076 28.2353C3.88076 25.4271 4.9963 22.734 6.98198 20.7483C8.96766 18.7626 11.6608 17.6471 14.469 17.6471C17.2772 17.6471 19.9703 18.7626 21.956 20.7483C23.9417 22.734 25.0572 25.4271 25.0572 28.2353C25.0572 28.7033 25.2432 29.1522 25.5741 29.4831C25.905 29.8141 26.3539 30 26.8219 30C27.29 30 27.7388 29.8141 28.0698 29.4831C28.4007 29.1522 28.5866 28.7033 28.5866 28.2353C28.584 25.5235 27.8005 22.8698 26.3296 20.5915C24.8588 18.3133 22.7629 16.5069 20.2925 15.3882V15.3882ZM14.469 14.1176C13.4219 14.1176 12.3984 13.8072 11.5277 13.2254C10.6571 12.6437 9.97857 11.8169 9.57787 10.8495C9.17717 9.88213 9.07233 8.81766 9.2766 7.7907C9.48088 6.76374 9.98509 5.82042 10.7255 5.08002C11.4659 4.33963 12.4092 3.83541 13.4362 3.63114C14.4631 3.42686 15.5276 3.5317 16.495 3.9324C17.4623 4.3331 18.2892 5.01166 18.8709 5.88228C19.4526 6.75289 19.7631 7.77645 19.7631 8.82353C19.7631 10.2276 19.2053 11.5742 18.2125 12.567C17.2197 13.5599 15.8731 14.1176 14.469 14.1176ZM35.1337 9.93529C34.9696 9.76989 34.7745 9.63861 34.5594 9.54902C34.3444 9.45942 34.1137 9.4133 33.8808 9.4133C33.6478 9.4133 33.4171 9.45942 33.2021 9.54902C32.9871 9.63861 32.7919 9.76989 32.6278 9.93529L29.0984 13.4647L28.0043 12.3529C27.8402 12.1875 27.6451 12.0563 27.43 11.9667C27.215 11.8771 26.9843 11.8309 26.7513 11.8309C26.5184 11.8309 26.2877 11.8771 26.0727 11.9667C25.8576 12.0563 25.6625 12.1875 25.4984 12.3529C25.1697 12.6836 24.9852 13.1308 24.9852 13.5971C24.9852 14.0633 25.1697 14.5105 25.4984 14.8412L27.8631 17.2059C28.1938 17.5346 28.641 17.719 29.1072 17.719C29.5734 17.719 30.0207 17.5346 30.3513 17.2059L35.0631 12.4941C35.2413 12.3341 35.385 12.1395 35.4856 11.9221C35.5861 11.7048 35.6414 11.4693 35.648 11.2299C35.6546 10.9905 35.6124 10.7523 35.524 10.5297C35.4356 10.3071 35.3028 10.1049 35.1337 9.93529V9.93529Z"
                            fill="#34B1E8" />
                        </svg>
                      </div>
                    </div>
                    <div class="widget-stats-content flex-fill">
                      <span class="widget-stats-title">Sudah Absen</span>
                      <span class="widget-stats-amount">{{ personelSudahAbsen.length }}
                        &nbsp;
                        <button type="button" class="btn btn-primary btn-sm" v-if="personelSudahAbsen.length != 0"
                          data-bs-toggle="modal" data-bs-target="#ModalSudahAbsen">
                          Lihat Personel
                        </button>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-6">
              <div class="card widget widget-stats">
                <div class="card-body">
                  <div class="widget-stats-container d-flex">
                    <div class="widget-stats-icon widget-stats-icon-danger">
                      <div>
                        <svg width="24" height="55" viewBox="0 0 36 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path
                            d="M20.289 15.3882C21.2306 14.5732 21.9859 13.5651 22.5035 12.4324C23.0211 11.2997 23.289 10.0689 23.289 8.82353C23.289 6.48338 22.3594 4.23908 20.7047 2.58435C19.0499 0.929619 16.8056 0 14.4655 0C12.1253 0 9.88104 0.929619 8.22631 2.58435C6.57158 4.23908 5.64196 6.48338 5.64196 8.82353C5.64194 10.0689 5.90984 11.2997 6.42747 12.4324C6.9451 13.5651 7.70035 14.5732 8.64196 15.3882C6.17162 16.5069 4.07572 18.3133 2.60486 20.5915C1.13401 22.8698 0.350437 25.5235 0.347839 28.2353C0.347839 28.7033 0.533763 29.1522 0.86471 29.4831C1.19566 29.8141 1.64452 30 2.11255 30C2.58057 30 3.02943 29.8141 3.36038 29.4831C3.69133 29.1522 3.87725 28.7033 3.87725 28.2353C3.87725 25.4271 4.99279 22.734 6.97847 20.7483C8.96415 18.7626 11.6573 17.6471 14.4655 17.6471C17.2737 17.6471 19.9668 18.7626 21.9525 20.7483C23.9382 22.734 25.0537 25.4271 25.0537 28.2353C25.0537 28.7033 25.2396 29.1522 25.5706 29.4831C25.9015 29.8141 26.3504 30 26.8184 30C27.2865 30 27.7353 29.8141 28.0663 29.4831C28.3972 29.1522 28.5831 28.7033 28.5831 28.2353C28.5805 25.5235 27.797 22.8698 26.3261 20.5915C24.8553 18.3133 22.7594 16.5069 20.289 15.3882V15.3882ZM14.4655 14.1176C13.4184 14.1176 12.3948 13.8072 11.5242 13.2254C10.6536 12.6437 9.97506 11.8169 9.57436 10.8495C9.17366 9.88213 9.06882 8.81766 9.27309 7.7907C9.47737 6.76374 9.98159 5.82042 10.722 5.08002C11.4624 4.33963 12.4057 3.83541 13.4327 3.63114C14.4596 3.42686 15.5241 3.5317 16.4915 3.9324C17.4588 4.3331 18.2857 5.01166 18.8674 5.88228C19.4491 6.75289 19.7596 7.77645 19.7596 8.82353C19.7596 10.2276 19.2018 11.5742 18.209 12.567C17.2162 13.5599 15.8696 14.1176 14.4655 14.1176ZM33.7184 15L35.1302 13.6059C35.2947 13.4413 35.4253 13.246 35.5143 13.031C35.6033 12.816 35.6492 12.5856 35.6492 12.3529C35.6492 12.1202 35.6033 11.8898 35.5143 11.6749C35.4253 11.4599 35.2947 11.2645 35.1302 11.1C34.9657 10.9355 34.7703 10.8049 34.5553 10.7159C34.3404 10.6268 34.1099 10.581 33.8773 10.581C33.6446 10.581 33.4141 10.6268 33.1992 10.7159C32.9842 10.8049 32.7889 10.9355 32.6243 11.1L31.2302 12.5118L29.8361 11.1C29.6715 10.9355 29.4762 10.8049 29.2612 10.7159C29.0462 10.6268 28.8158 10.581 28.5831 10.581C28.1132 10.581 27.6625 10.7677 27.3302 11.1C27.1657 11.2645 27.0351 11.4599 26.9461 11.6749C26.857 11.8898 26.8112 12.1202 26.8112 12.3529C26.8112 12.8229 26.9979 13.2736 27.3302 13.6059L28.742 15L27.3302 16.3941C27.1648 16.5582 27.0335 16.7533 26.9439 16.9684C26.8543 17.1834 26.8082 17.4141 26.8082 17.6471C26.8082 17.88 26.8543 18.1107 26.9439 18.3257C27.0335 18.5408 27.1648 18.7359 27.3302 18.9C27.4942 19.0654 27.6894 19.1967 27.9045 19.2863C28.1195 19.3759 28.3502 19.422 28.5831 19.422C28.8161 19.422 29.0468 19.3759 29.2618 19.2863C29.4768 19.1967 29.672 19.0654 29.8361 18.9L31.2302 17.4882L32.6243 18.9C32.7884 19.0654 32.9835 19.1967 33.1986 19.2863C33.4136 19.3759 33.6443 19.422 33.8773 19.422C34.1102 19.422 34.3409 19.3759 34.5559 19.2863C34.771 19.1967 34.9661 19.0654 35.1302 18.9C35.2956 18.7359 35.4269 18.5408 35.5165 18.3257C35.6061 18.1107 35.6522 17.88 35.6522 17.6471C35.6522 17.4141 35.6061 17.1834 35.5165 16.9684C35.4269 16.7533 35.2956 16.5582 35.1302 16.3941L33.7184 15Z"
                            fill="#FF4857" />
                        </svg>
                      </div>
                    </div>
                    <div class="widget-stats-content flex-fill">
                      <span class="widget-stats-title">Belum Absen</span>
                      <span class="widget-stats-amount">{{ data.belumAbsen }}
                        &nbsp;
                        <button type="button" class="btn btn-primary btn-sm" v-if="data.belumAbsen != 0"
                          data-bs-toggle="modal" data-bs-target="#ModalBelumAbsen">
                          Lihat Personel
                        </button>
                      </span>
                    </div>
                    <!-- <div
                      class="
                        widget-stats-indicator widget-stats-indicator-positive
                        align-self-start
                      "
                    >
                      <i class="material-icons">keyboard_arrow_up</i> 12%
                    </div> -->
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-6">
              <div class="card widget widget-stats">
                <div class="card-body">
                  <div class="widget-stats-container d-flex">
                    <div class="widget-stats-icon widget-stats-icon-warning">
                      <div>
                        <svg width="24" height="55" viewBox="0 0 30 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path
                            d="M28.3333 10.3333L18.3333 1.56668C17.4166 0.746752 16.2299 0.293457 15 0.293457C13.7701 0.293457 12.5834 0.746752 11.6667 1.56668L1.66667 10.3333C1.13729 10.8068 0.714839 11.3876 0.427459 12.0371C0.140078 12.6866 -0.00564019 13.3898 5.40231e-06 14.1V28.6667C5.40231e-06 29.9928 0.52679 31.2645 1.46447 32.2022C2.40215 33.1399 3.67392 33.6667 5.00001 33.6667H25C26.3261 33.6667 27.5979 33.1399 28.5355 32.2022C29.4732 31.2645 30 29.9928 30 28.6667V14.0833C30.0033 13.3759 29.8564 12.6759 29.5691 12.0295C29.2818 11.383 28.8606 10.8049 28.3333 10.3333V10.3333ZM18.3333 30.3333H11.6667V22C11.6667 21.558 11.8423 21.1341 12.1548 20.8215C12.4674 20.5089 12.8913 20.3333 13.3333 20.3333H16.6667C17.1087 20.3333 17.5326 20.5089 17.8452 20.8215C18.1577 21.1341 18.3333 21.558 18.3333 22V30.3333ZM26.6667 28.6667C26.6667 29.1087 26.4911 29.5326 26.1785 29.8452C25.866 30.1577 25.442 30.3333 25 30.3333H21.6667V22C21.6667 20.6739 21.1399 19.4022 20.2022 18.4645C19.2645 17.5268 17.9928 17 16.6667 17H13.3333C12.0073 17 10.7355 17.5268 9.7978 18.4645C8.86012 19.4022 8.33334 20.6739 8.33334 22V30.3333H5.00001C4.55798 30.3333 4.13406 30.1577 3.82149 29.8452C3.50893 29.5326 3.33334 29.1087 3.33334 28.6667V14.0833C3.33364 13.8467 3.38433 13.6128 3.48203 13.3973C3.57974 13.1818 3.72222 12.9895 3.90001 12.8333L13.9 4.08334C14.2042 3.81614 14.5952 3.66879 15 3.66879C15.4049 3.66879 15.7959 3.81614 16.1 4.08334L26.1 12.8333C26.2778 12.9895 26.4203 13.1818 26.518 13.3973C26.6157 13.6128 26.6664 13.8467 26.6667 14.0833V28.6667Z"
                            fill="#FF9500" />
                        </svg>
                      </div>
                    </div>
                    <div class="widget-stats-content flex-fill">
                      <span class="widget-stats-title">WFH</span>
                      <span class="widget-stats-amount">{{ personelWFH.length }}
                        &nbsp;
                        <button type="button" class="btn btn-primary btn-sm" v-if="personelWFH.length != 0"
                          data-bs-toggle="modal" data-bs-target="#ModalAbsenWFH">
                          Lihat Personel
                        </button>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-6">
              <div class="card widget widget-stats">
                <div class="card-body">
                  <div class="widget-stats-container d-flex">
                    <div class="widget-stats-icon widget-stats-icon-success">
                      <div>
                        <svg width="24" height="55" viewBox="0 0 36 42" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path
                            d="M23.1875 18.625C23.8852 17.6645 24.3038 16.5297 24.3968 15.3462C24.4899 14.1627 24.2539 12.9765 23.7149 11.9187C23.1759 10.8609 22.3549 9.97282 21.3426 9.35254C20.3304 8.73227 19.1663 8.40398 17.9792 8.40398C16.792 8.40398 15.6279 8.73227 14.6157 9.35254C13.6034 9.97282 12.7824 10.8609 12.2434 11.9187C11.7044 12.9765 11.4684 14.1627 11.5615 15.3462C11.6546 16.5297 12.0731 17.6645 12.7708 18.625C11.8858 19.189 11.0978 19.8925 10.4375 20.7083C10.2651 20.9313 10.1384 21.186 10.0645 21.458C9.99056 21.7299 9.97094 22.0138 10.0067 22.2933C10.0425 22.5729 10.133 22.8426 10.2731 23.0872C10.4131 23.3318 10.5999 23.5463 10.8229 23.7187C11.0459 23.8911 11.3006 24.0178 11.5726 24.0917C11.8445 24.1656 12.1284 24.1853 12.4079 24.1495C12.6875 24.1137 12.9572 24.0232 13.2018 23.8831C13.4464 23.7431 13.661 23.5563 13.8333 23.3333C14.3421 22.6866 14.9906 22.1632 15.7301 21.8025C16.4697 21.4417 17.2813 21.2528 18.1042 21.25C18.927 21.2528 19.7386 21.4417 20.4782 21.8025C21.2178 22.1632 21.8662 22.6866 22.375 23.3333C22.5711 23.575 22.8188 23.7697 23.1 23.9031C23.3812 24.0365 23.6888 24.1052 24 24.1041C24.3906 24.1023 24.7727 23.9908 25.1029 23.7822C25.4332 23.5737 25.6981 23.2765 25.8675 22.9246C26.0369 22.5727 26.104 22.1803 26.0612 21.7921C26.0183 21.4039 25.8671 21.0355 25.625 20.7291C24.935 19.8972 24.1112 19.1861 23.1875 18.625V18.625ZM18 17.1041C17.5545 17.1038 17.1189 16.9725 16.7475 16.7264C16.3761 16.4804 16.0852 16.1306 15.9112 15.7205C15.7371 15.3103 15.6875 14.8581 15.7686 14.42C15.8497 13.982 16.0578 13.5774 16.3671 13.2568C16.6764 12.9361 17.0732 12.7135 17.5081 12.6167C17.943 12.5199 18.3967 12.5532 18.8128 12.7123C19.2289 12.8715 19.589 13.1495 19.8483 13.5119C20.1075 13.8742 20.2545 14.3047 20.2708 14.75C20.282 15.0551 20.2316 15.3594 20.1225 15.6446C20.0134 15.9298 19.8479 16.19 19.6359 16.4098C19.4239 16.6296 19.1698 16.8044 18.8887 16.9236C18.6076 17.0429 18.3054 17.1043 18 17.1041V17.1041ZM35.625 16.0625C35.3325 13.0185 34.2567 10.1022 32.5025 7.59749C30.7482 5.09277 28.3752 3.08502 25.6146 1.76973C22.8539 0.454442 19.7997 -0.123547 16.7494 0.0920422C13.6991 0.307632 10.7565 1.30945 8.20833 2.99995C6.01916 4.4638 4.18136 6.39432 2.82696 8.65285C1.47257 10.9114 0.635194 13.4418 0.374996 16.0625C0.119751 18.6659 0.447234 21.2935 1.33368 23.7547C2.22014 26.2159 3.64332 28.4488 5.5 30.2916L16.5417 41.3541C16.7353 41.5494 16.9658 41.7044 17.2196 41.8101C17.4735 41.9159 17.7458 41.9704 18.0208 41.9704C18.2959 41.9704 18.5682 41.9159 18.822 41.8101C19.0759 41.7044 19.3063 41.5494 19.5 41.3541L30.5 30.2916C32.3567 28.4488 33.7799 26.2159 34.6663 23.7547C35.5528 21.2935 35.8802 18.6659 35.625 16.0625V16.0625ZM27.5833 27.3541L18 36.9375L8.41666 27.3541C7.00435 25.9417 5.9225 24.234 5.24889 22.3536C4.57528 20.4733 4.32663 18.467 4.52083 16.4791C4.71628 14.4606 5.35784 12.5107 6.3991 10.7705C7.44037 9.03021 8.85532 7.54309 10.5417 6.41662C12.752 4.94836 15.3465 4.16515 18 4.16515C20.6535 4.16515 23.248 4.94836 25.4583 6.41662C27.1396 7.53874 28.5514 9.01929 29.5924 10.7519C30.6334 12.4845 31.2778 14.4262 31.4792 16.4375C31.6797 18.4321 31.4342 20.4464 30.7604 22.3344C30.0866 24.2225 29.0014 25.9371 27.5833 27.3541V27.3541Z"
                            fill="#4BAD48" />
                        </svg>
                      </div>
                    </div>
                    <div class="widget-stats-content flex-fill">
                      <span class="widget-stats-title">Kunjungan</span>
                      <span class="widget-stats-amount">{{ personelKunjungan.length }}
                        &nbsp;
                        <button type="button" class="btn btn-primary btn-sm" v-if="personelKunjungan.length != 0"
                          data-bs-toggle="modal" data-bs-target="#ModalAbsenKunjungan">
                          Lihat Personel
                        </button>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- <div class="col-xl-6">
              <div class="card widget widget-stats">
                <div class="card-body">
                  <div class="widget-stats-container d-flex">
                    <div class="widget-stats-icon widget-stats-icon-success" style="background-color: #FFECFE;">
                      <div>
                        <svg width="30" height="55" viewBox="0 0 38 38" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path
                            d="M18.2083 31.6666H8.70834C8.28842 31.6666 7.88569 31.4998 7.58876 31.2029C7.29183 30.906 7.12501 30.5032 7.12501 30.0833V7.91663C7.12501 7.4967 7.29183 7.09397 7.58876 6.79704C7.88569 6.50011 8.28842 6.33329 8.70834 6.33329H16.625V11.0833C16.625 12.3431 17.1255 13.5513 18.0163 14.4421C18.9071 15.3328 20.1152 15.8333 21.375 15.8333H26.125V23.75C26.125 24.1699 26.2918 24.5726 26.5888 24.8695C26.8857 25.1665 27.2884 25.3333 27.7083 25.3333C28.1283 25.3333 28.531 25.1665 28.8279 24.8695C29.1249 24.5726 29.2917 24.1699 29.2917 23.75V14.155C29.2752 14.0095 29.2433 13.8662 29.1967 13.7275V13.585C29.1206 13.4222 29.019 13.2725 28.8958 13.1416L19.3958 3.64163C19.265 3.51847 19.1153 3.41692 18.9525 3.34079C18.9001 3.33162 18.8466 3.33162 18.7942 3.34079C18.6402 3.25846 18.4748 3.19975 18.3033 3.16663H8.70834C7.44857 3.16663 6.24038 3.66707 5.34959 4.55787C4.45879 5.44867 3.95834 6.65685 3.95834 7.91663V30.0833C3.95834 31.3431 4.45879 32.5513 5.34959 33.4421C6.24038 34.3329 7.44857 34.8333 8.70834 34.8333H18.2083C18.6283 34.8333 19.031 34.6665 19.3279 34.3695C19.6249 34.0726 19.7917 33.6699 19.7917 33.25C19.7917 32.83 19.6249 32.4273 19.3279 32.1304C19.031 31.8334 18.6283 31.6666 18.2083 31.6666ZM19.7917 8.56579L23.8925 12.6666H21.375C20.9551 12.6666 20.5524 12.4998 20.2554 12.2029C19.9585 11.9059 19.7917 11.5032 19.7917 11.0833V8.56579ZM11.875 22.1666H21.375C21.7949 22.1666 22.1977 21.9998 22.4946 21.7029C22.7915 21.4059 22.9583 21.0032 22.9583 20.5833C22.9583 20.1634 22.7915 19.7606 22.4946 19.4637C22.1977 19.1668 21.7949 19 21.375 19H11.875C11.4551 19 11.0524 19.1668 10.7554 19.4637C10.4585 19.7606 10.2917 20.1634 10.2917 20.5833C10.2917 21.0032 10.4585 21.4059 10.7554 21.7029C11.0524 21.9998 11.4551 22.1666 11.875 22.1666ZM18.2083 25.3333H11.875C11.4551 25.3333 11.0524 25.5001 10.7554 25.797C10.4585 26.094 10.2917 26.4967 10.2917 26.9166C10.2917 27.3366 10.4585 27.7393 10.7554 28.0362C11.0524 28.3331 11.4551 28.5 11.875 28.5H18.2083C18.6283 28.5 19.031 28.3331 19.3279 28.0362C19.6249 27.7393 19.7917 27.3366 19.7917 26.9166C19.7917 26.4967 19.6249 26.094 19.3279 25.797C19.031 25.5001 18.6283 25.3333 18.2083 25.3333ZM11.875 15.8333H13.4583C13.8783 15.8333 14.281 15.6665 14.5779 15.3695C14.8749 15.0726 15.0417 14.6699 15.0417 14.25C15.0417 13.83 14.8749 13.4273 14.5779 13.1304C14.281 12.8334 13.8783 12.6666 13.4583 12.6666H11.875C11.4551 12.6666 11.0524 12.8334 10.7554 13.1304C10.4585 13.4273 10.2917 13.83 10.2917 14.25C10.2917 14.6699 10.4585 15.0726 10.7554 15.3695C11.0524 15.6665 11.4551 15.8333 11.875 15.8333ZM33.5825 25.7925C33.4353 25.6441 33.2602 25.5263 33.0673 25.4459C32.8743 25.3655 32.6674 25.3241 32.4583 25.3241C32.2493 25.3241 32.0424 25.3655 31.8494 25.4459C31.6565 25.5263 31.4814 25.6441 31.3342 25.7925L26.125 31.0175L24.0825 28.9591C23.9349 28.8115 23.7596 28.6944 23.5667 28.6145C23.3739 28.5346 23.1671 28.4935 22.9583 28.4935C22.7496 28.4935 22.5428 28.5346 22.3499 28.6145C22.1571 28.6944 21.9818 28.8115 21.8342 28.9591C21.6866 29.1068 21.5694 29.282 21.4895 29.4749C21.4097 29.6678 21.3685 29.8745 21.3685 30.0833C21.3685 30.2921 21.4097 30.4988 21.4895 30.6917C21.5694 30.8846 21.6866 31.0598 21.8342 31.2075L25.0008 34.3741C25.148 34.5225 25.3232 34.6403 25.5161 34.7207C25.709 34.8011 25.916 34.8425 26.125 34.8425C26.334 34.8425 26.541 34.8011 26.7339 34.7207C26.9269 34.6403 27.102 34.5225 27.2492 34.3741L33.5825 28.0408C33.7309 27.8936 33.8487 27.7185 33.9291 27.5255C34.0095 27.3326 34.0509 27.1256 34.0509 26.9166C34.0509 26.7076 34.0095 26.5007 33.9291 26.3077C33.8487 26.1148 33.7309 25.9397 33.5825 25.7925Z"
                            fill="#FF69D5" />
                        </svg>
                      </div>
                    </div>
                    <div class="widget-stats-content flex-fill">
                      <span class="widget-stats-title">Izin</span>
                      <span class="widget-stats-amount">{{ izin.hari.length + izin.jam.length }}
                        &nbsp;
                        <button type="button" class="btn btn-primary btn-sm"
                          v-if="izin.hari.length != 0 || izin.jam.length != 0" data-bs-toggle="modal"
                          data-bs-target="#ModalIzin">
                          Lihat Personel
                        </button>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-6">
              <div class="card widget widget-stats">
                <div class="card-body">
                  <div class="widget-stats-container d-flex">
                    <div class="widget-stats-icon widget-stats-icon-success" style="background-color: #F3E9FF;">
                      <div>
                        <svg width="32" height="58" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path
                            d="M17.5 3.75C16.1325 3.75 15 4.8825 15 6.25V7.5H11.25V6.25H8.75V7.5H6.25C4.8825 7.5 3.75 8.6325 3.75 10V30C3.75 31.3675 4.8825 32.5 6.25 32.5H33.75C35.1175 32.5 36.25 31.3675 36.25 30V10C36.25 8.6325 35.1175 7.5 33.75 7.5H31.25V6.25H28.75V7.5H25V6.25C25 4.8825 23.8675 3.75 22.5 3.75H17.5ZM17.5 6.25H22.5V7.5H17.5V6.25ZM6.25 10H33.75V30H31.25V11.25H28.75V30H11.25V11.25H8.75V30H6.25V10Z"
                            fill="#7910B9" />
                        </svg>
                      </div>
                    </div>
                    <div class="widget-stats-content flex-fill">
                      <span class="widget-stats-title">Cuti</span>
                      <span class="widget-stats-amount">{{ cuti.length }}
                        &nbsp;
                        <button type="button" class="btn btn-primary btn-sm" v-if="cuti.length != 0"
                          data-bs-toggle="modal" data-bs-target="#ModalCuti">
                          Lihat Personel
                        </button>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div> -->
            <div class="col-xl-6">
              <div class="card widget widget-stats">
                <div class="card-body">
                  <div class="widget-stats-container d-flex">
                    <div class="widget-stats-icon widget-stats-icon-success" style="background-color: #FFECFE;">
                      <div>
                        <svg width="30" height="55" viewBox="0 0 38 38" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path
                            d="M18.2083 31.6666H8.70834C8.28842 31.6666 7.88569 31.4998 7.58876 31.2029C7.29183 30.906 7.12501 30.5032 7.12501 30.0833V7.91663C7.12501 7.4967 7.29183 7.09397 7.58876 6.79704C7.88569 6.50011 8.28842 6.33329 8.70834 6.33329H16.625V11.0833C16.625 12.3431 17.1255 13.5513 18.0163 14.4421C18.9071 15.3328 20.1152 15.8333 21.375 15.8333H26.125V23.75C26.125 24.1699 26.2918 24.5726 26.5888 24.8695C26.8857 25.1665 27.2884 25.3333 27.7083 25.3333C28.1283 25.3333 28.531 25.1665 28.8279 24.8695C29.1249 24.5726 29.2917 24.1699 29.2917 23.75V14.155C29.2752 14.0095 29.2433 13.8662 29.1967 13.7275V13.585C29.1206 13.4222 29.019 13.2725 28.8958 13.1416L19.3958 3.64163C19.265 3.51847 19.1153 3.41692 18.9525 3.34079C18.9001 3.33162 18.8466 3.33162 18.7942 3.34079C18.6402 3.25846 18.4748 3.19975 18.3033 3.16663H8.70834C7.44857 3.16663 6.24038 3.66707 5.34959 4.55787C4.45879 5.44867 3.95834 6.65685 3.95834 7.91663V30.0833C3.95834 31.3431 4.45879 32.5513 5.34959 33.4421C6.24038 34.3329 7.44857 34.8333 8.70834 34.8333H18.2083C18.6283 34.8333 19.031 34.6665 19.3279 34.3695C19.6249 34.0726 19.7917 33.6699 19.7917 33.25C19.7917 32.83 19.6249 32.4273 19.3279 32.1304C19.031 31.8334 18.6283 31.6666 18.2083 31.6666ZM19.7917 8.56579L23.8925 12.6666H21.375C20.9551 12.6666 20.5524 12.4998 20.2554 12.2029C19.9585 11.9059 19.7917 11.5032 19.7917 11.0833V8.56579ZM11.875 22.1666H21.375C21.7949 22.1666 22.1977 21.9998 22.4946 21.7029C22.7915 21.4059 22.9583 21.0032 22.9583 20.5833C22.9583 20.1634 22.7915 19.7606 22.4946 19.4637C22.1977 19.1668 21.7949 19 21.375 19H11.875C11.4551 19 11.0524 19.1668 10.7554 19.4637C10.4585 19.7606 10.2917 20.1634 10.2917 20.5833C10.2917 21.0032 10.4585 21.4059 10.7554 21.7029C11.0524 21.9998 11.4551 22.1666 11.875 22.1666ZM18.2083 25.3333H11.875C11.4551 25.3333 11.0524 25.5001 10.7554 25.797C10.4585 26.094 10.2917 26.4967 10.2917 26.9166C10.2917 27.3366 10.4585 27.7393 10.7554 28.0362C11.0524 28.3331 11.4551 28.5 11.875 28.5H18.2083C18.6283 28.5 19.031 28.3331 19.3279 28.0362C19.6249 27.7393 19.7917 27.3366 19.7917 26.9166C19.7917 26.4967 19.6249 26.094 19.3279 25.797C19.031 25.5001 18.6283 25.3333 18.2083 25.3333ZM11.875 15.8333H13.4583C13.8783 15.8333 14.281 15.6665 14.5779 15.3695C14.8749 15.0726 15.0417 14.6699 15.0417 14.25C15.0417 13.83 14.8749 13.4273 14.5779 13.1304C14.281 12.8334 13.8783 12.6666 13.4583 12.6666H11.875C11.4551 12.6666 11.0524 12.8334 10.7554 13.1304C10.4585 13.4273 10.2917 13.83 10.2917 14.25C10.2917 14.6699 10.4585 15.0726 10.7554 15.3695C11.0524 15.6665 11.4551 15.8333 11.875 15.8333ZM33.5825 25.7925C33.4353 25.6441 33.2602 25.5263 33.0673 25.4459C32.8743 25.3655 32.6674 25.3241 32.4583 25.3241C32.2493 25.3241 32.0424 25.3655 31.8494 25.4459C31.6565 25.5263 31.4814 25.6441 31.3342 25.7925L26.125 31.0175L24.0825 28.9591C23.9349 28.8115 23.7596 28.6944 23.5667 28.6145C23.3739 28.5346 23.1671 28.4935 22.9583 28.4935C22.7496 28.4935 22.5428 28.5346 22.3499 28.6145C22.1571 28.6944 21.9818 28.8115 21.8342 28.9591C21.6866 29.1068 21.5694 29.282 21.4895 29.4749C21.4097 29.6678 21.3685 29.8745 21.3685 30.0833C21.3685 30.2921 21.4097 30.4988 21.4895 30.6917C21.5694 30.8846 21.6866 31.0598 21.8342 31.2075L25.0008 34.3741C25.148 34.5225 25.3232 34.6403 25.5161 34.7207C25.709 34.8011 25.916 34.8425 26.125 34.8425C26.334 34.8425 26.541 34.8011 26.7339 34.7207C26.9269 34.6403 27.102 34.5225 27.2492 34.3741L33.5825 28.0408C33.7309 27.8936 33.8487 27.7185 33.9291 27.5255C34.0095 27.3326 34.0509 27.1256 34.0509 26.9166C34.0509 26.7076 34.0095 26.5007 33.9291 26.3077C33.8487 26.1148 33.7309 25.9397 33.5825 25.7925Z"
                            fill="#FF69D5" />
                        </svg>
                      </div>
                    </div>
                    <div class="widget-stats-content flex-fill">
                      <span class="widget-stats-title">Izin</span>
                      <span class="widget-stats-amount">{{ izin.hari.length + izin.jam.length }}
                        &nbsp;
                        <button type="button" class="btn btn-primary btn-sm"
                          v-if="izin.hari.length != 0 || izin.jam.length != 0" data-bs-toggle="modal"
                          data-bs-target="#ModalIzin">
                          Lihat Personel
                        </button>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-6">
              <div class="card widget widget-stats">
                <div class="card-body">
                  <div class="widget-stats-container d-flex">
                    <div class="widget-stats-icon widget-stats-icon-success" style="background-color: #F3E9FF;">
                      <div>
                        <svg width="32" height="58" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path
                            d="M17.5 3.75C16.1325 3.75 15 4.8825 15 6.25V7.5H11.25V6.25H8.75V7.5H6.25C4.8825 7.5 3.75 8.6325 3.75 10V30C3.75 31.3675 4.8825 32.5 6.25 32.5H33.75C35.1175 32.5 36.25 31.3675 36.25 30V10C36.25 8.6325 35.1175 7.5 33.75 7.5H31.25V6.25H28.75V7.5H25V6.25C25 4.8825 23.8675 3.75 22.5 3.75H17.5ZM17.5 6.25H22.5V7.5H17.5V6.25ZM6.25 10H33.75V30H31.25V11.25H28.75V30H11.25V11.25H8.75V30H6.25V10Z"
                            fill="#7910B9" />
                        </svg>
                      </div>
                    </div>
                    <div class="widget-stats-content flex-fill">
                      <span class="widget-stats-title">Cuti</span>
                      <span class="widget-stats-amount">{{ cuti.length }}
                        &nbsp;
                        <button type="button" class="btn btn-primary btn-sm" v-if="cuti.length != 0"
                          data-bs-toggle="modal" data-bs-target="#ModalCuti">
                          Lihat Personel
                        </button>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row"></div>
          <!-- IF SUPERADMIN -->
          <div class="row" v-if="$can('superadmin')">
            <div class="col-xl-12">
              <div class="row">
                <div class="col-xl-12">
                  <div class="card widget widget-stats-large">
                    <div class="widget-stats-large-chart-container">
                      <div class="card-header">
                        <h5 class="card-title">
                          Company Terdaftar 1 Tahun Terakhir<span class="badge badge-light badge-style-light">Last
                            Year</span>
                        </h5>
                      </div>
                      <div class="card-body">
                        <div id="chart">
                          <apexchart type="bar" height="350" :options="chart3.chartOptions" :series="chart3.series">
                          </apexchart>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- IF ADMIN -->
          <div class="row" v-if="$can('admin')">
            <div class="col-xl-12">
              <div class="row">
                <div class="col-xl-12">
                  <div class="card widget widget-stats-large">
                    <div class="widget-stats-large-chart-container">
                      <div class="card-header">
                        <h5 class="card-title">
                          Laporan Status Absensi 1 Tahun Terakhir<span class="badge badge-light badge-style-light">Last
                            Year</span>
                        </h5>
                      </div>
                      <div class="card-body">
                        <div id="chart">
                          <apexchart type="bar" height="350" :options="chart2.chartOptions" :series="chart2.series">
                          </apexchart>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row" v-if="$can('admin')">
            <div class="col-xl-12">
              <div class="row">
                <div class="col-xl-12">
                  <div class="card widget widget-stats-large">
                    <div class="widget-stats-large-chart-container">
                      <div class="card-header">
                        <h5 class="card-title">
                          Laporan Absensi 1 Tahun Terakhir<span class="badge badge-light badge-style-light">Last
                            Year</span>
                        </h5>
                      </div>
                      <div class="card-body">
                        <div id="chart">
                          <apexchart type="bar" height="350" :options="chart1.chartOptions" :series="chart1.series">
                          </apexchart>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row"></div>
          <!-- IF ADMIN -->

        </div>
      </div>
    </div>
    <div class="modal fade" id="ModalBelumAbsen" tabindex="-1" aria-labelledby="ModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="mx-4">
            <div class="
                w-100
                text-center
                widget-stats-icon widget-stats-icon-danger
                py-3
                rounded
              " style="background-color: #fce3e5">
              <h5 class="modal-title text-danger">
                <svg width="24" height="55" viewBox="0 0 36 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M20.289 15.3882C21.2306 14.5732 21.9859 13.5651 22.5035 12.4324C23.0211 11.2997 23.289 10.0689 23.289 8.82353C23.289 6.48338 22.3594 4.23908 20.7047 2.58435C19.0499 0.929619 16.8056 0 14.4655 0C12.1253 0 9.88104 0.929619 8.22631 2.58435C6.57158 4.23908 5.64196 6.48338 5.64196 8.82353C5.64194 10.0689 5.90984 11.2997 6.42747 12.4324C6.9451 13.5651 7.70035 14.5732 8.64196 15.3882C6.17162 16.5069 4.07572 18.3133 2.60486 20.5915C1.13401 22.8698 0.350437 25.5235 0.347839 28.2353C0.347839 28.7033 0.533763 29.1522 0.86471 29.4831C1.19566 29.8141 1.64452 30 2.11255 30C2.58057 30 3.02943 29.8141 3.36038 29.4831C3.69133 29.1522 3.87725 28.7033 3.87725 28.2353C3.87725 25.4271 4.99279 22.734 6.97847 20.7483C8.96415 18.7626 11.6573 17.6471 14.4655 17.6471C17.2737 17.6471 19.9668 18.7626 21.9525 20.7483C23.9382 22.734 25.0537 25.4271 25.0537 28.2353C25.0537 28.7033 25.2396 29.1522 25.5706 29.4831C25.9015 29.8141 26.3504 30 26.8184 30C27.2865 30 27.7353 29.8141 28.0663 29.4831C28.3972 29.1522 28.5831 28.7033 28.5831 28.2353C28.5805 25.5235 27.797 22.8698 26.3261 20.5915C24.8553 18.3133 22.7594 16.5069 20.289 15.3882V15.3882ZM14.4655 14.1176C13.4184 14.1176 12.3948 13.8072 11.5242 13.2254C10.6536 12.6437 9.97506 11.8169 9.57436 10.8495C9.17366 9.88213 9.06882 8.81766 9.27309 7.7907C9.47737 6.76374 9.98159 5.82042 10.722 5.08002C11.4624 4.33963 12.4057 3.83541 13.4327 3.63114C14.4596 3.42686 15.5241 3.5317 16.4915 3.9324C17.4588 4.3331 18.2857 5.01166 18.8674 5.88228C19.4491 6.75289 19.7596 7.77645 19.7596 8.82353C19.7596 10.2276 19.2018 11.5742 18.209 12.567C17.2162 13.5599 15.8696 14.1176 14.4655 14.1176ZM33.7184 15L35.1302 13.6059C35.2947 13.4413 35.4253 13.246 35.5143 13.031C35.6033 12.816 35.6492 12.5856 35.6492 12.3529C35.6492 12.1202 35.6033 11.8898 35.5143 11.6749C35.4253 11.4599 35.2947 11.2645 35.1302 11.1C34.9657 10.9355 34.7703 10.8049 34.5553 10.7159C34.3404 10.6268 34.1099 10.581 33.8773 10.581C33.6446 10.581 33.4141 10.6268 33.1992 10.7159C32.9842 10.8049 32.7889 10.9355 32.6243 11.1L31.2302 12.5118L29.8361 11.1C29.6715 10.9355 29.4762 10.8049 29.2612 10.7159C29.0462 10.6268 28.8158 10.581 28.5831 10.581C28.1132 10.581 27.6625 10.7677 27.3302 11.1C27.1657 11.2645 27.0351 11.4599 26.9461 11.6749C26.857 11.8898 26.8112 12.1202 26.8112 12.3529C26.8112 12.8229 26.9979 13.2736 27.3302 13.6059L28.742 15L27.3302 16.3941C27.1648 16.5582 27.0335 16.7533 26.9439 16.9684C26.8543 17.1834 26.8082 17.4141 26.8082 17.6471C26.8082 17.88 26.8543 18.1107 26.9439 18.3257C27.0335 18.5408 27.1648 18.7359 27.3302 18.9C27.4942 19.0654 27.6894 19.1967 27.9045 19.2863C28.1195 19.3759 28.3502 19.422 28.5831 19.422C28.8161 19.422 29.0468 19.3759 29.2618 19.2863C29.4768 19.1967 29.672 19.0654 29.8361 18.9L31.2302 17.4882L32.6243 18.9C32.7884 19.0654 32.9835 19.1967 33.1986 19.2863C33.4136 19.3759 33.6443 19.422 33.8773 19.422C34.1102 19.422 34.3409 19.3759 34.5559 19.2863C34.771 19.1967 34.9661 19.0654 35.1302 18.9C35.2956 18.7359 35.4269 18.5408 35.5165 18.3257C35.6061 18.1107 35.6522 17.88 35.6522 17.6471C35.6522 17.4141 35.6061 17.1834 35.5165 16.9684C35.4269 16.7533 35.2956 16.5582 35.1302 16.3941L33.7184 15Z"
                    fill="#FF4857" />
                </svg>
                BELUM ABSEN
              </h5>
            </div>
          </div>
          <div class="modal-body">
            <div class="table-responsive">
              <table id="dt-dashboard" class="display" style="width: 100%">
                <thead class="text-left text-nowrap">
                  <tr>
                    <th style="width: 5%">No</th>
                    <th>Nama</th>
                    <th class="text-start">Departemen</th>
                  </tr>
                </thead>
                <tbody>
                  <tr style="text-align: left" v-for="(val, index) in personelBelumAbsen" :key="index">
                    <td>{{ index + 1 }}</td>
                    <td>
                      {{ val.m_personel_names }} (
                      {{ val.m_personel_personID }} )
                    </td>
                    <td class="text-start">{{ val.departemen.m_departemen_name }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-light" data-bs-dismiss="modal">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="ModalSudahAbsen" tabindex="-1" aria-labelledby="ModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="mx-4">
            <div class="
                w-100
                text-center
                widget-stats-icon widget-stats-icon-danger
                py-3
                rounded
              " style="background-color: #dff0fe">
              <h5 class="modal-title" style="color: #34b1e8">
                <svg width="24" height="55" viewBox="0 0 36 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M20.2925 15.3882C21.2341 14.5732 21.9894 13.5651 22.507 12.4324C23.0246 11.2997 23.2925 10.0689 23.2925 8.82353C23.2925 6.48338 22.3629 4.23908 20.7082 2.58435C19.0534 0.929619 16.8091 0 14.469 0C12.1289 0 9.88455 0.929619 8.22982 2.58435C6.57509 4.23908 5.64547 6.48338 5.64547 8.82353C5.64545 10.0689 5.91335 11.2997 6.43098 12.4324C6.94861 13.5651 7.70386 14.5732 8.64547 15.3882C6.17512 16.5069 4.07923 18.3133 2.60837 20.5915C1.13752 22.8698 0.353946 25.5235 0.351349 28.2353C0.351349 28.7033 0.537273 29.1522 0.868219 29.4831C1.19917 29.8141 1.64803 30 2.11605 30C2.58408 30 3.03294 29.8141 3.36389 29.4831C3.69484 29.1522 3.88076 28.7033 3.88076 28.2353C3.88076 25.4271 4.9963 22.734 6.98198 20.7483C8.96766 18.7626 11.6608 17.6471 14.469 17.6471C17.2772 17.6471 19.9703 18.7626 21.956 20.7483C23.9417 22.734 25.0572 25.4271 25.0572 28.2353C25.0572 28.7033 25.2432 29.1522 25.5741 29.4831C25.905 29.8141 26.3539 30 26.8219 30C27.29 30 27.7388 29.8141 28.0698 29.4831C28.4007 29.1522 28.5866 28.7033 28.5866 28.2353C28.584 25.5235 27.8005 22.8698 26.3296 20.5915C24.8588 18.3133 22.7629 16.5069 20.2925 15.3882V15.3882ZM14.469 14.1176C13.4219 14.1176 12.3984 13.8072 11.5277 13.2254C10.6571 12.6437 9.97857 11.8169 9.57787 10.8495C9.17717 9.88213 9.07233 8.81766 9.2766 7.7907C9.48088 6.76374 9.98509 5.82042 10.7255 5.08002C11.4659 4.33963 12.4092 3.83541 13.4362 3.63114C14.4631 3.42686 15.5276 3.5317 16.495 3.9324C17.4623 4.3331 18.2892 5.01166 18.8709 5.88228C19.4526 6.75289 19.7631 7.77645 19.7631 8.82353C19.7631 10.2276 19.2053 11.5742 18.2125 12.567C17.2197 13.5599 15.8731 14.1176 14.469 14.1176ZM35.1337 9.93529C34.9696 9.76989 34.7745 9.63861 34.5594 9.54902C34.3444 9.45942 34.1137 9.4133 33.8808 9.4133C33.6478 9.4133 33.4171 9.45942 33.2021 9.54902C32.9871 9.63861 32.7919 9.76989 32.6278 9.93529L29.0984 13.4647L28.0043 12.3529C27.8402 12.1875 27.6451 12.0563 27.43 11.9667C27.215 11.8771 26.9843 11.8309 26.7513 11.8309C26.5184 11.8309 26.2877 11.8771 26.0727 11.9667C25.8576 12.0563 25.6625 12.1875 25.4984 12.3529C25.1697 12.6836 24.9852 13.1308 24.9852 13.5971C24.9852 14.0633 25.1697 14.5105 25.4984 14.8412L27.8631 17.2059C28.1938 17.5346 28.641 17.719 29.1072 17.719C29.5734 17.719 30.0207 17.5346 30.3513 17.2059L35.0631 12.4941C35.2413 12.3341 35.385 12.1395 35.4856 11.9221C35.5861 11.7048 35.6414 11.4693 35.648 11.2299C35.6546 10.9905 35.6124 10.7523 35.524 10.5297C35.4356 10.3071 35.3028 10.1049 35.1337 9.93529V9.93529Z"
                    fill="#34B1E8" />
                </svg>
                SUDAH ABSEN
              </h5>
            </div>
          </div>
          <div class="modal-body">
            <div class="table-responsive">
              <table id="dt2" class="display" style="width: 100%">
                <thead class="text-left text-nowrap">
                  <tr>
                    <th style="width: 5%">No</th>
                    <th style="width: 200px !important">Nama</th>
                    <th style="width: 60px !important">Departemen</th>
                    <th style="width: 60px !important">Jam Absen</th>
                    <th style="width: 220px !important">Keterangan</th>
                  </tr>
                </thead>
                <tbody>
                  <tr style="text-align: left" v-for="(val, index) in personelSudahAbsen" :key="index">
                    <td>{{ index + 1 }}</td>
                    <td>
                      {{ val.m_personel_names }} (
                      {{ val.m_personel_personID }} )
                    </td>
                    <td>{{ val.m_departemen_name }}</td>
                    <td class="text-nowrap text-danger" v-if="val.isLate">
                      {{ convertDate(val.t_absensi_startClock) }} WIB
                    </td>
                    <td class="text-nowrap" v-else>
                      {{ convertDate(val.t_absensi_startClock) }} WIB
                    </td>
                    <td>
                      {{
                      val.t_absensi_isLate != 1
                      ? val.t_absensi_catatan_telat_masuk
                      : "-"
                      }}
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-light" data-bs-dismiss="modal">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="ModalAbsenWFH" tabindex="-1" aria-labelledby="ModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="mx-4">
            <div class="
                w-100
                text-center
                widget-stats-icon widget-stats-icon-danger
                py-3
                rounded
              " style="background-color: #fff3e3">
              <h5 class="modal-title text-warning">
                <svg width="24" height="55" viewBox="0 0 30 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M28.3333 10.3333L18.3333 1.56668C17.4166 0.746752 16.2299 0.293457 15 0.293457C13.7701 0.293457 12.5834 0.746752 11.6667 1.56668L1.66667 10.3333C1.13729 10.8068 0.714839 11.3876 0.427459 12.0371C0.140078 12.6866 -0.00564019 13.3898 5.40231e-06 14.1V28.6667C5.40231e-06 29.9928 0.52679 31.2645 1.46447 32.2022C2.40215 33.1399 3.67392 33.6667 5.00001 33.6667H25C26.3261 33.6667 27.5979 33.1399 28.5355 32.2022C29.4732 31.2645 30 29.9928 30 28.6667V14.0833C30.0033 13.3759 29.8564 12.6759 29.5691 12.0295C29.2818 11.383 28.8606 10.8049 28.3333 10.3333V10.3333ZM18.3333 30.3333H11.6667V22C11.6667 21.558 11.8423 21.1341 12.1548 20.8215C12.4674 20.5089 12.8913 20.3333 13.3333 20.3333H16.6667C17.1087 20.3333 17.5326 20.5089 17.8452 20.8215C18.1577 21.1341 18.3333 21.558 18.3333 22V30.3333ZM26.6667 28.6667C26.6667 29.1087 26.4911 29.5326 26.1785 29.8452C25.866 30.1577 25.442 30.3333 25 30.3333H21.6667V22C21.6667 20.6739 21.1399 19.4022 20.2022 18.4645C19.2645 17.5268 17.9928 17 16.6667 17H13.3333C12.0073 17 10.7355 17.5268 9.7978 18.4645C8.86012 19.4022 8.33334 20.6739 8.33334 22V30.3333H5.00001C4.55798 30.3333 4.13406 30.1577 3.82149 29.8452C3.50893 29.5326 3.33334 29.1087 3.33334 28.6667V14.0833C3.33364 13.8467 3.38433 13.6128 3.48203 13.3973C3.57974 13.1818 3.72222 12.9895 3.90001 12.8333L13.9 4.08334C14.2042 3.81614 14.5952 3.66879 15 3.66879C15.4049 3.66879 15.7959 3.81614 16.1 4.08334L26.1 12.8333C26.2778 12.9895 26.4203 13.1818 26.518 13.3973C26.6157 13.6128 26.6664 13.8467 26.6667 14.0833V28.6667Z"
                    fill="#FF9500" />
                </svg>
                WFH
              </h5>
            </div>
          </div>

          <div class="modal-body">
            <div class="table-responsive">
              <table id="dt-wfh" class="display" style="width: 100%">
                <thead class="text-left text-nowrap">
                  <tr>
                    <th style="width: 5%">No</th>
                    <th>Nama</th>
                    <th>Departemen</th>
                    <th>Jam Absen</th>
                  </tr>
                </thead>
                <tbody>
                  <tr style="text-align: left" v-for="(val, index) in personelWFH" :key="index">
                    <td>{{ index + 1 }}</td>
                    <td>
                      {{ val.m_personel_names }} (
                      {{ val.m_personel_personID }} )
                    </td>
                    <td>{{ val.departemen.m_departemen_name }}</td>
                    <td class="text-nowrap" v-bind:class="{
                      'text-danger': val.absensi.t_absensi_isLate != 1,
                    }">
                      {{ convertDate(val.absensi.t_absensi_startClock) }} WIB
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-light" data-bs-dismiss="modal">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="ModalAbsenKunjungan" tabindex="-1" aria-labelledby="ModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="mx-4">
            <div class="
                w-100
                text-center
                widget-stats-icon widget-stats-icon-danger
                py-3
                rounded
              " style="background-color: #e6fcf0">
              <h5 class="modal-title text-success">
                <svg width="24" height="55" viewBox="0 0 36 42" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M23.1875 18.625C23.8852 17.6645 24.3038 16.5297 24.3968 15.3462C24.4899 14.1627 24.2539 12.9765 23.7149 11.9187C23.1759 10.8609 22.3549 9.97282 21.3426 9.35254C20.3304 8.73227 19.1663 8.40398 17.9792 8.40398C16.792 8.40398 15.6279 8.73227 14.6157 9.35254C13.6034 9.97282 12.7824 10.8609 12.2434 11.9187C11.7044 12.9765 11.4684 14.1627 11.5615 15.3462C11.6546 16.5297 12.0731 17.6645 12.7708 18.625C11.8858 19.189 11.0978 19.8925 10.4375 20.7083C10.2651 20.9313 10.1384 21.186 10.0645 21.458C9.99056 21.7299 9.97094 22.0138 10.0067 22.2933C10.0425 22.5729 10.133 22.8426 10.2731 23.0872C10.4131 23.3318 10.5999 23.5463 10.8229 23.7187C11.0459 23.8911 11.3006 24.0178 11.5726 24.0917C11.8445 24.1656 12.1284 24.1853 12.4079 24.1495C12.6875 24.1137 12.9572 24.0232 13.2018 23.8831C13.4464 23.7431 13.661 23.5563 13.8333 23.3333C14.3421 22.6866 14.9906 22.1632 15.7301 21.8025C16.4697 21.4417 17.2813 21.2528 18.1042 21.25C18.927 21.2528 19.7386 21.4417 20.4782 21.8025C21.2178 22.1632 21.8662 22.6866 22.375 23.3333C22.5711 23.575 22.8188 23.7697 23.1 23.9031C23.3812 24.0365 23.6888 24.1052 24 24.1041C24.3906 24.1023 24.7727 23.9908 25.1029 23.7822C25.4332 23.5737 25.6981 23.2765 25.8675 22.9246C26.0369 22.5727 26.104 22.1803 26.0612 21.7921C26.0183 21.4039 25.8671 21.0355 25.625 20.7291C24.935 19.8972 24.1112 19.1861 23.1875 18.625V18.625ZM18 17.1041C17.5545 17.1038 17.1189 16.9725 16.7475 16.7264C16.3761 16.4804 16.0852 16.1306 15.9112 15.7205C15.7371 15.3103 15.6875 14.8581 15.7686 14.42C15.8497 13.982 16.0578 13.5774 16.3671 13.2568C16.6764 12.9361 17.0732 12.7135 17.5081 12.6167C17.943 12.5199 18.3967 12.5532 18.8128 12.7123C19.2289 12.8715 19.589 13.1495 19.8483 13.5119C20.1075 13.8742 20.2545 14.3047 20.2708 14.75C20.282 15.0551 20.2316 15.3594 20.1225 15.6446C20.0134 15.9298 19.8479 16.19 19.6359 16.4098C19.4239 16.6296 19.1698 16.8044 18.8887 16.9236C18.6076 17.0429 18.3054 17.1043 18 17.1041V17.1041ZM35.625 16.0625C35.3325 13.0185 34.2567 10.1022 32.5025 7.59749C30.7482 5.09277 28.3752 3.08502 25.6146 1.76973C22.8539 0.454442 19.7997 -0.123547 16.7494 0.0920422C13.6991 0.307632 10.7565 1.30945 8.20833 2.99995C6.01916 4.4638 4.18136 6.39432 2.82696 8.65285C1.47257 10.9114 0.635194 13.4418 0.374996 16.0625C0.119751 18.6659 0.447234 21.2935 1.33368 23.7547C2.22014 26.2159 3.64332 28.4488 5.5 30.2916L16.5417 41.3541C16.7353 41.5494 16.9658 41.7044 17.2196 41.8101C17.4735 41.9159 17.7458 41.9704 18.0208 41.9704C18.2959 41.9704 18.5682 41.9159 18.822 41.8101C19.0759 41.7044 19.3063 41.5494 19.5 41.3541L30.5 30.2916C32.3567 28.4488 33.7799 26.2159 34.6663 23.7547C35.5528 21.2935 35.8802 18.6659 35.625 16.0625V16.0625ZM27.5833 27.3541L18 36.9375L8.41666 27.3541C7.00435 25.9417 5.9225 24.234 5.24889 22.3536C4.57528 20.4733 4.32663 18.467 4.52083 16.4791C4.71628 14.4606 5.35784 12.5107 6.3991 10.7705C7.44037 9.03021 8.85532 7.54309 10.5417 6.41662C12.752 4.94836 15.3465 4.16515 18 4.16515C20.6535 4.16515 23.248 4.94836 25.4583 6.41662C27.1396 7.53874 28.5514 9.01929 29.5924 10.7519C30.6334 12.4845 31.2778 14.4262 31.4792 16.4375C31.6797 18.4321 31.4342 20.4464 30.7604 22.3344C30.0866 24.2225 29.0014 25.9371 27.5833 27.3541V27.3541Z"
                    fill="#4BAD48" />
                </svg>
                KUNJUNGAN
              </h5>
            </div>
          </div>
          <div class="modal-body">
            <div class="table-responsive">
              <table id="dt-kunjungan" class="display" style="width: 100%">
                <thead class="text-left text-nowrap">
                  <tr>
                    <th style="width: 5%">No</th>
                    <th>Nama</th>
                    <th>Departemen</th>
                    <th>Jam Kunjungan</th>
                    <th>Keterangan</th>
                  </tr>
                </thead>
                <tbody>
                  <tr style="text-align: left" v-for="(val, index) in personelKunjungan" :key="index">
                    <td>{{ index + 1 }}</td>
                    <td>
                      {{ val.personel.m_personel_names }} (
                      {{ val.personel.m_personel_personID }} )
                    </td>
                    <td>{{ val.personel.departemen.m_departemen_name }}</td>
                    <td class="text-nowrap">
                      {{ convertDate(val.t_absensi_startClock) }} WIB
                    </td>
                    <td class="text-nowrap">
                      {{
                      val.t_absensi_catatan
                      ? val.t_absensi_catatan
                      : "-"
                      }}
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-light" data-bs-dismiss="modal">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="ModalIzin" tabindex="-1" aria-labelledby="ModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="mx-4">
            <div class="
                w-100
                text-center
                widget-stats-icon widget-stats-icon-danger
                py-3
                rounded
              " style="background-color: #FFECFE">
              <h5 class="modal-title" style="color: #FF69D5;">
                <svg width="26" height="39" viewBox="0 0 39 39" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M18.708 32.1689H9.20801C8.78808 32.1689 8.38536 32.0021 8.08842 31.7052C7.79149 31.4083 7.62467 31.0055 7.62467 30.5856V8.41895C7.62467 7.99902 7.79149 7.59629 8.08842 7.29936C8.38536 7.00243 8.78808 6.83561 9.20801 6.83561H17.1247V11.5856C17.1247 12.8454 17.6251 14.0536 18.5159 14.9444C19.4067 15.8352 20.6149 16.3356 21.8747 16.3356H26.6247V24.2523C26.6247 24.6722 26.7915 25.0749 27.0884 25.3719C27.3854 25.6688 27.7881 25.8356 28.208 25.8356C28.6279 25.8356 29.0307 25.6688 29.3276 25.3719C29.6245 25.0749 29.7913 24.6722 29.7913 24.2523V14.6573C29.7748 14.5118 29.743 14.3685 29.6963 14.2298V14.0873C29.6202 13.9245 29.5187 13.7748 29.3955 13.6439L19.8955 4.14395C19.7646 4.02079 19.615 3.91924 19.4522 3.84311C19.3998 3.83394 19.3462 3.83394 19.2938 3.84311C19.1399 3.76078 18.9744 3.70207 18.803 3.66895H9.20801C7.94823 3.66895 6.74005 4.16939 5.84925 5.06019C4.95845 5.95099 4.45801 7.15917 4.45801 8.41895V30.5856C4.45801 31.8454 4.95845 33.0536 5.84925 33.9444C6.74005 34.8352 7.94823 35.3356 9.20801 35.3356H18.708C19.1279 35.3356 19.5307 35.1688 19.8276 34.8719C20.1245 34.5749 20.2913 34.1722 20.2913 33.7523C20.2913 33.3324 20.1245 32.9296 19.8276 32.6327C19.5307 32.3358 19.1279 32.1689 18.708 32.1689ZM20.2913 9.06811L24.3922 13.1689H21.8747C21.4547 13.1689 21.052 13.0021 20.7551 12.7052C20.4582 12.4083 20.2913 12.0055 20.2913 11.5856V9.06811ZM12.3747 22.6689H21.8747C22.2946 22.6689 22.6973 22.5021 22.9943 22.2052C23.2912 21.9083 23.458 21.5055 23.458 21.0856C23.458 20.6657 23.2912 20.263 22.9943 19.966C22.6973 19.6691 22.2946 19.5023 21.8747 19.5023H12.3747C11.9547 19.5023 11.552 19.6691 11.2551 19.966C10.9582 20.263 10.7913 20.6657 10.7913 21.0856C10.7913 21.5055 10.9582 21.9083 11.2551 22.2052C11.552 22.5021 11.9547 22.6689 12.3747 22.6689ZM18.708 25.8356H12.3747C11.9547 25.8356 11.552 26.0024 11.2551 26.2994C10.9582 26.5963 10.7913 26.999 10.7913 27.4189C10.7913 27.8389 10.9582 28.2416 11.2551 28.5385C11.552 28.8355 11.9547 29.0023 12.3747 29.0023H18.708C19.1279 29.0023 19.5307 28.8355 19.8276 28.5385C20.1245 28.2416 20.2913 27.8389 20.2913 27.4189C20.2913 26.999 20.1245 26.5963 19.8276 26.2994C19.5307 26.0024 19.1279 25.8356 18.708 25.8356ZM12.3747 16.3356H13.958C14.3779 16.3356 14.7807 16.1688 15.0776 15.8719C15.3745 15.5749 15.5413 15.1722 15.5413 14.7523C15.5413 14.3324 15.3745 13.9296 15.0776 13.6327C14.7807 13.3358 14.3779 13.1689 13.958 13.1689H12.3747C11.9547 13.1689 11.552 13.3358 11.2551 13.6327C10.9582 13.9296 10.7913 14.3324 10.7913 14.7523C10.7913 15.1722 10.9582 15.5749 11.2551 15.8719C11.552 16.1688 11.9547 16.3356 12.3747 16.3356ZM34.0822 26.2948C33.935 26.1464 33.7599 26.0286 33.5669 25.9482C33.374 25.8678 33.167 25.8264 32.958 25.8264C32.749 25.8264 32.542 25.8678 32.3491 25.9482C32.1562 26.0286 31.981 26.1464 31.8338 26.2948L26.6247 31.5198L24.5822 29.4614C24.4345 29.3138 24.2593 29.1967 24.0664 29.1168C23.8735 29.0369 23.6668 28.9958 23.458 28.9958C23.2492 28.9958 23.0425 29.0369 22.8496 29.1168C22.6567 29.1967 22.4815 29.3138 22.3338 29.4614C22.1862 29.6091 22.0691 29.7843 21.9892 29.9772C21.9093 30.1701 21.8682 30.3768 21.8682 30.5856C21.8682 30.7944 21.9093 31.0011 21.9892 31.194C22.0691 31.3869 22.1862 31.5622 22.3338 31.7098L25.5005 34.8764C25.6477 35.0249 25.8228 35.1426 26.0158 35.223C26.2087 35.3034 26.4157 35.3448 26.6247 35.3448C26.8337 35.3448 27.0406 35.3034 27.2336 35.223C27.4265 35.1426 27.6016 35.0249 27.7488 34.8764L34.0822 28.5431C34.2306 28.3959 34.3484 28.2208 34.4288 28.0279C34.5091 27.8349 34.5505 27.628 34.5505 27.4189C34.5505 27.2099 34.5091 27.003 34.4288 26.81C34.3484 26.6171 34.2306 26.442 34.0822 26.2948V26.2948Z"
                    fill="#FF69D5" />
                </svg>
                IZIN
              </h5>
            </div>
          </div>
          <div class="modal-body">
            <div class="text-center mb-3">
              <div class="">
                <button @click="ModalIzinChange('Jam')" class="btn btn-sm btn-secondary" style="margin-right: 1rem; background-color: #FFECFE;">Izin Jam</button>
                <button @click="ModalIzinChange('Hari')" class="btn btn-sm btn-secondary" style="background-color: #FFECFE;">Izin Hari</button>
              </div>
            </div>
            <div class="table-responsive">
              <table id="dt-izin" class="display" style="width: 100%">
                <thead class="text-left text-nowrap">
                  <tr>
                    <th style="width: 5%">No</th>
                    <th>Nama</th>
                    <th>Departemen</th>
                    <th>Keperluan</th>
                  </tr>
                </thead>
                <tbody>
                  <tr style="text-align: left" v-for="(val, index) in izin.current" :key="index">
                    <td>{{ index + 1 }}</td>
                    <td>
                      {{ val.m_personel_names }} (
                      {{ val.m_personel_personID }} )
                    </td>
                    <td>{{ val.departemen.m_departemen_name }}</td>
                    <td class="text-nowrap">
                      {{
                      val.permit.permit_description
                      ? val.permit.permit_description
                      : "-"
                      }}
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-light" data-bs-dismiss="modal">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="ModalCuti" tabindex="-1" aria-labelledby="ModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="mx-4">
            <div class="
                w-100
                text-center
                widget-stats-icon widget-stats-icon-danger
                py-3
                rounded
              " style="background-color: #F3E9FF">
              <h5 class="modal-title text-success" style="color: #7910B9 !important;">
                <svg class="pr-5" width="26" height="58" viewBox="0 0 40 40" fill="none"
                  xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M17.5 3.75C16.1325 3.75 15 4.8825 15 6.25V7.5H11.25V6.25H8.75V7.5H6.25C4.8825 7.5 3.75 8.6325 3.75 10V30C3.75 31.3675 4.8825 32.5 6.25 32.5H33.75C35.1175 32.5 36.25 31.3675 36.25 30V10C36.25 8.6325 35.1175 7.5 33.75 7.5H31.25V6.25H28.75V7.5H25V6.25C25 4.8825 23.8675 3.75 22.5 3.75H17.5ZM17.5 6.25H22.5V7.5H17.5V6.25ZM6.25 10H33.75V30H31.25V11.25H28.75V30H11.25V11.25H8.75V30H6.25V10Z"
                    fill="#7910B9" />
                </svg>
                CUTI
              </h5>
            </div>
          </div>
          <div class="modal-body">
            <div class="table-responsive">
              <table id="dt-cuti" class="display" style="width: 100%">
                <thead class="text-left text-nowrap">
                  <tr>
                    <th style="width: 5%">No</th>
                    <th>Nama</th>
                    <th>Departemen</th>
                    <th>Keperluan</th>
                  </tr>
                </thead>
                <tbody>
                  <tr style="text-align: left" v-for="(val, index) in cuti" :key="index">
                    <td>{{ index + 1 }}</td>
                    <td>
                      {{ val.m_personel_names }} (
                      {{ val.m_personel_personID }} )
                    </td>
                    <td>{{ val.departemen.m_departemen_name }}</td>
                    <td class="text-nowrap">
                      {{
                      val.permit.permit_description
                      ? val.permit.permit_description
                      : "-"
                      }}
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-light" data-bs-dismiss="modal">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
<script>
import * as Api from "../../helper/Api.js";
export default {
  data() {
    return {
      timestamp: "00:00:00",
      data: {
        sudahAbsen: 0,
        belumAbsen: 0,
        wfh: 0,
        aktivitasPersonel: {},
      },
      dataSuperadmin: {
        companyTerdaftar: 0,
        personelAktif: 0,
        aktivitas: {},
      },
      personelBelumAbsen: [],
      personelSudahAbsen: [],
      personelWFH: [],
      personelKunjungan: [],
      izin: {
        jam: [],
        hari: [],
        current: []
      },
      cuti: [],
      series: [
        {
          name: "Loading.....",
          data: [0],
        },
      ],
      chart1: {
        chartOptions: {
          chart: {
            type: "bar",
            height: 350,
          },
          plotOptions: {
            bar: {
              horizontal: false,
              columnWidth: "55%",
              endingShape: "rounded",
            },
          },
          dataLabels: {
            enabled: false,
          },
          stroke: {
            show: true,
            width: 2,
            colors: ["transparent"],
          },
          xaxis: {
            categories: [],
          },
          yaxis: {
            title: {
              text: "Jumlah",
            },
          },
          fill: {
            opacity: 1,
          },
          tooltip: {
            y: {
              formatter: function (val) {
                return val;
              },
            },
          },
        },
        series: [],
      },
      chart2: {
        chartOptions: {
          chart: {
            type: "bar",
            height: 350,
          },
          plotOptions: {
            bar: {
              horizontal: false,
              columnWidth: "55%",
              endingShape: "rounded",
            },
          },
          dataLabels: {
            enabled: false,
          },
          stroke: {
            show: true,
            width: 2,
            colors: ["transparent"],
          },
          xaxis: {
            categories: [],
          },
          yaxis: {
            title: {
              text: "Jumlah",
            },
          },
          fill: {
            opacity: 1,
          },
          tooltip: {
            y: {
              formatter: function (val) {
                return val;
              },
            },
          },
        },
        series: [],
      },
      chart3: {
        chartOptions: {
          chart: {
            type: "bar",
            height: 350,
          },
          plotOptions: {
            bar: {
              horizontal: false,
              columnWidth: "55%",
              endingShape: "rounded",
            },
          },
          dataLabels: {
            enabled: false,
          },
          stroke: {
            show: true,
            width: 2,
            colors: ["transparent"],
          },
          xaxis: {
            categories: [],
          },
          yaxis: {
            title: {
              text: "Jumlah",
            },
          },
          fill: {
            opacity: 1,
          },
          tooltip: {
            y: {
              formatter: function (val) {
                return val;
              },
            },
          },
        },
        series: [],
      },
      table: null,
      table2: null,
      table3: null,
      table4: null,
      table51: null,
      table52: null,
      table6: null,
    };
  },
  created() { },
  async mounted() {
    await this.loadChart();
    await this.loadChart2();
    await this.checkAbsensi();
    await this.checkPersonelSudahAbsen();
    await this.checkPersonelBelumAbsen();
    await this.checkPersonelWFH();
    await this.checkPersonelKunjungan();
    await this.checkIzin();
    await this.checkCuti();
    await this.checkAkumulasiSuperadmin();
  },
  methods: {
    async checkAkumulasiSuperadmin() {
      this.$Progress.start();
      await axios
        .get(env.VITE_API_URL + "checkAkumulasiSuperadmin")
        .then((response) => {
          if (Api.response(response.data, false) === Api.STATUS_SUCCESS) {
            this.$Progress.finish();
            this.dataSuperadmin = response.data.data;
            this.chart3.chartOptions = {
              xaxis: {
                categories: response.data.data.month,
              },
            };
            this.chart3.series = [
              {
                name: "Company",
                data: response.data.data.company,
              },
            ];
          }
        })
        .catch((e) => {
          this.$Progress.fail();
          Api.messageError(e);
        });
    },
    async checkAbsensi() {
      this.$Progress.start();
      await axios
        .get(env.VITE_API_URL + "checkAbsen")
        .then((response) => {
          if (Api.response(response.data, false) === Api.STATUS_SUCCESS) {
            this.$Progress.finish();
            this.data = response.data.data;
          }
        })
        .catch((e) => {
          this.$Progress.fail();
          Api.messageError(e);
        });
    },
    async checkPersonelBelumAbsen() {
      setTimeout(() => {
        this.table = $("#dt-dashboard").DataTable({
        "columnDefs": [
          { "width": "3%", "targets": 0 }
        ]
      });
      }, 1000);
      this.$Progress.start();
      await axios
        .get(env.VITE_API_URL + "checkPersonelBelumAbsen")
        .then((response) => {
          if (Api.response(response.data, false) === Api.STATUS_SUCCESS) {
            this.$Progress.finish();
            this.personelBelumAbsen = response.data.data;
            this.table.destroy();
            this.$nextTick(() => {
              this.table = $("#dt-dashboard").DataTable({
        "columnDefs": [
          { "width": "3%", "targets": 0 }
        ]
      });
            });
          }
        })
        .catch((e) => {
          this.$Progress.fail();
          Api.messageError(e);
        });
    },
    async checkPersonelSudahAbsen() {
      this.table2 = $("#dt2").DataTable({ autoWidth: false });
      this.$Progress.start();
      await axios
        .get(env.VITE_API_URL + "checkPersonelSudahAbsen")
        .then((response) => {
          if (Api.response(response.data, false) === Api.STATUS_SUCCESS) {
            this.$Progress.finish();
            this.personelSudahAbsen = response.data.data;
            this.personelSudahAbsen.forEach((item) => {
              item.isLate = item.t_absensi_isLate == 2;
            });
            this.table2.destroy();
            this.$nextTick(() => {
              this.table2 = $("#dt2").DataTable({ autoWidth: false });
            });
          }
        })
        .catch((e) => {
          this.$Progress.fail();
          Api.messageError(e);
        });
    },
    async checkPersonelWFH() {
      this.table3 = $("#dt-wfh").DataTable({
        "columnDefs": [
          { "width": "3%", "targets": 0 }
        ]
      });
      this.$Progress.start();
      await axios
        .get(env.VITE_API_URL + "checkPersonelWFH")
        .then((response) => {
          if (Api.response(response.data, false) === Api.STATUS_SUCCESS) {
            this.$Progress.finish();
            this.personelWFH = response.data.data;
            this.table3.destroy();
            this.$nextTick(() => {
              this.table3 = $("#dt-wfh").DataTable({
        "columnDefs": [
          { "width": "3%", "targets": 0 }
        ]
      });
            });
          }
        })
        .catch((e) => {
          this.$Progress.fail();
          Api.messageError(e);
        });
    },
    async checkPersonelKunjungan() {
      this.table4 = $("#dt-kunjungan").DataTable({
        "columnDefs": [
          { "width": "3%", "targets": 0 }
        ]
      });
      this.$Progress.start();
      await axios
        .get(env.VITE_API_URL + "checkPersonelKunjungan")
        .then((response) => {
          if (Api.response(response.data, false) === Api.STATUS_SUCCESS) {
            this.$Progress.finish();
            this.personelKunjungan = response.data.data;
            this.table4.destroy();
            this.$nextTick(() => {
              this.table4 = $("#dt-kunjungan").DataTable({
        "columnDefs": [
          { "width": "3%", "targets": 0 }
        ]
      });
            });
          }
        })
        .catch((e) => {
          this.$Progress.fail();
          Api.messageError(e);
        });
    },
    async checkIzin() {
      this.table51 = $("#dt-izin").DataTable({
        "columnDefs": [
          { "width": "3%", "targets": 0 }
        ]
      });
      this.$Progress.start();
      await axios
        .get(env.VITE_API_URL + "checkIzin")
        .then((response) => {
          if (Api.response(response.data, false) === Api.STATUS_SUCCESS) {
            this.$Progress.finish();
            this.izin = response.data.data;
            this.izin.current = response.data.data.jam;
            this.table51.destroy();
            this.$nextTick(() => {
              this.table51 = $("#dt-izin").DataTable({
        "columnDefs": [
          { "width": "3%", "targets": 0 }
        ]
      });
            });
          }
        })
        .catch((e) => {
          this.$Progress.fail();
          Api.messageError(e);
        });
    },
    async checkCuti() {
      this.table52 = $("#dt-cuti").DataTable({
        "columnDefs": [
          { "width": "3%", "targets": 0 }
        ]
      });
      this.$Progress.start();
      await axios
        .get(env.VITE_API_URL + "checkCuti")
        .then((response) => {
          if (Api.response(response.data, false) === Api.STATUS_SUCCESS) {
            this.$Progress.finish();
            this.cuti = response.data.data;
            this.table52.destroy();
            this.$nextTick(() => {
              this.table52 = $("#dt-cuti").DataTable({
        "columnDefs": [
          { "width": "3%", "targets": 0 }
        ]
      });
            });
          }
        })
        .catch((e) => {
          this.$Progress.fail();
          Api.messageError(e);
        });
    },
    ModalIzinChange(type) {
      if (type == "Jam") {
        this.izin.current = this.izin.jam;
      } else {
        this.izin.current = this.izin.hari;
      }
      this.table51.destroy();
      this.$nextTick(() => {
        this.table51 = $("#dt-izin").DataTable({
        "columnDefs": [
          { "width": "3%", "targets": 0 }
        ]
      })
      });
    },
    async loadChart() {
      this.$Progress.start();
      await axios
        .get(env.VITE_API_URL + "chart")
        .then((response) => {
          if (Api.response(response.data, false) === Api.STATUS_SUCCESS) {
            this.$Progress.finish();
            // console.log(response.data.data);
            this.chart1.chartOptions = {
              xaxis: {
                categories: response.data.data.month,
              },
            };
            this.chart1.series = [
              {
                name: "Absensi",
                data: response.data.data.absen,
              },
              {
                name: "WFH",
                data: response.data.data.wfh,
              },
              {
                name: "Lembur",
                data: response.data.data.lembur,
              },
              {
                name: "Visit",
                data: response.data.data.visit,
              },
            ];
            // console.log(response.data.data);
          }
        })
        .catch((e) => {
          this.$Progress.fail();
          Api.messageError(e);
        });
    },
    async loadChart2() {
      this.$Progress.start();
      await axios
        .get(env.VITE_API_URL + "chart2")
        .then((response) => {
          if (Api.response(response.data, false) === Api.STATUS_SUCCESS) {
            this.$Progress.finish();
            // console.log(response.data.data);
            this.chart2.chartOptions = {
              xaxis: {
                categories: response.data.data.month,
              },
            };
            this.chart2.series = [
              {
                name: "Terlambat",
                data: response.data.data.terlambat,
              },
              {
                name: "Tidak Terlambat",
                data: response.data.data.tidak_terlambat,
              },
            ];
            // console.log(response.data.data);
          }
        })
        .catch((e) => {
          this.$Progress.fail();
          Api.messageError(e);
        });
    },
    getNow: function () {
      const today = new Date();
      const hours =
        today.getHours().toString().length == 2
          ? today.getHours()
          : "0" + today.getHours();
      const minutes =
        today.getMinutes().toString().length == 2
          ? today.getMinutes()
          : "0" + today.getMinutes();
      const seconds =
        today.getSeconds().toString().length == 2
          ? today.getSeconds()
          : "0" + today.getSeconds();
      const time = hours + ":" + minutes + ":" + seconds;
      // const dateTime = date + " " + time;
      const dateTime = time;
      this.timestamp = dateTime;
    },
    convertDate(date) {
      return Api.convertDate(date, "DD-MM-YYYY hh:mm");
    },
  },
};
</script>